## **Лабораторна робота № 2**
# **Просторова обробка зображень. Точкові перетворення  (негатив, яскравість, контраст).**

- - -
## **Мета роботи:**
Ознайомитись з алгоритмами первинної  обробки зображень за допомогою амплітудних перетвореннь

## **Засоби виконання роботи:**
Для виконання роботи можливо використовувати довільний iнтерпретатор мови [PYTHON](https://www.python.org/downloads/), також [IDE Anaconda](https://anaconda.org/) (Jupyter Lab / Jupyter Notebook, Spyder) або [Microsoft Visual Studio](https://visualstudio.microsoft.com).

## **Теоретичні відомості**
Яскравість та контрастність напівтонового зображення регулюєтся за допомогою градаційной попіксельної обробки оригінального зображення.
Припустимо, що є напівтонове зображення, кожна кольорова (**R,G,B**) компонента i,j-го пікселя якого має однакові значення яскравостей **L[i,j]**. При амплітудній попіксельній обробці яскравість кожного пікселя змінюється нелініно, відповдно деякій функції **L_new [i,j]  = F (L[i,j])**.
1. Негативне зображення. Функція має вигляд **L_new [i,j]=265-L[i,j]**.
1. Підвіщення яскравості. Функція має вигляд **L_new [i,j]=L[i,j]+ L_bias** . В данному віпадку -  **0<L_bias<256** зміщення яскравості.
1. Підвіщення контрасту. В загальному випадку для підвіщення яскравості і контрасту в якості **F (...)** використвуються так звані функції гама-корекції. В найпростішому випадку кусочно-лінійна апроксимація цієї  функції має вигляд  
 **L_new [i,j] = 0, if L[i,j] < L_min**.  

 **L_new [i,j] = 255, if L[i,j] < L_max**.  

 **L_new [i,j]= K*(L_new [i,j]-L_min), if L_min <L[i,j] < L_min**.

 Подробиці щодо гама-корекції дивись [ ]()

## **Завдання до виконання**
1. Зчитати оригінальне зображення у відповідності за варіантом завдання лабораторної роботи.
1. Вивести структуру та розмір орігінального зображення.
1. Сформувати напівтонове зображення з орігінального зображення.
1. Сформувати негативне зображення. Зберігти у файл в форматі BMP.
1. Змінити яскравість зображення (L_bias - зміщення відповідно варіанту). Вивести на екран. Зберігти у файл в форматі BMP.
1. Змінити контраст зображення (параметри гамма функції відповідно варіанту). Вивести на екран. Зберігти у файл в форматі BMP.

## **Варіанти завдання**
|Варіант|[Файл Зображення](/Test_Images))|L_bias| L_low | L_top|
|:-------|:-------|:----- |:---|:--|
|**1**|COCO_000012774.jpg  |25|25|225|
|**2**|COCO_000015322.jpg  |50|35|200|
|**3**|COCO_000025391.jpg  |75|45|175|
|**4**|COCO_000028877.jpg  |80|55|225|
|**5**|COCO_000040672.jpg  |50|65|225|
|**6**|COCO_000049940.jpg  |40|75|175|
|**7**|COCO_000104571.jpg  |-90|85|225|
|**8**|COCO_000112142.jpg  |-100|40|200|
|**9**|COCO_000117357.jpg  |-85|50|200|
|**10**|COCO_000170013.jpg  |-65|60|225|
|   | |   |
|**21**|COCO_000173164.jpg |25|25| 225|
|**22**|COCO_000176388.jpg |50|25| 200|
|**23**|COCO_000180783.jpg |75|25| 180|
|**24**|COCO_000186732.jpg |85|25| 225|
|**25**|COCO_000224540.jpg |100|25| 200|
|**26**|COCO_000277143.jpg |90|25| 180|
|**27**|COCO_000286630.jpg |-30|25| 225|
|**28**|COCO_000366557.jpg |-40|25| 200|
|**29**|COCO_000390755.jpg |-60|25| 180|
|**30**|COCO_000411389.jpg |-70|25| 200|
|**31**|COCO_000495977.jpg |-50|25| 180|

## **Приклади**

- ### **Керування яскравістю зображення**
Вважаємо, що орігінальне напівтонове зображення завантажено до масиву ***gray_image*** та визначені змінні ***rows_num*** , ***clms_num***
Зміщення яскравостей зображення визначається значенням змінної ***L_bias***, 0<L_bias< 256
```
L_bias = 50
for i in  range (rows_num):
    for j in  range (clms_num):
        L = gray_im [i, j, 0] + L_bias
        if L < 0:
            gray_im_L [i, j, :] = 0
        elif L>bins-1:
            gray_im_L [i, j, :] = bins-1
        else :    
            gray_im_L [i, j, :] = L
```
- ### **Керування контрастом зображення**
Вважаємо, що орігінальне напівтонове зображення завантажено до масиву ***gray_image*** та визначені змінні ***rows_num*** , ***clms_num***  
В прикладі гамма функція визначається наступним чином: всі пікселі зображення, яскравість яких меньш ***L_low*** вважаються чорними (значення 0), всі пікселі, яскравість яких більш  ***L_top*** вважаються білими (значення 255). Яскравість останніх пікселів "розтягується" від 0 до 255.
```
## Визначення масиву зображення з півищеним контрастом
gray_im_С = np.zeros ( (rows_num, clms_num, 3), dtype=np.uint8)
## Визначення ГАММА функції
Gamma = np.zeros ( (bins, 3), dtype=np.float32)
## Найпростіша ГАММА функція підвіщення контрасту
L_low  = 50
L_top  = 200
K = bins/(L_top-L_low)
for i in range(bins):
    if i < L_low:
        Gamma[i]=0
    elif i>L_top:
        Gamma[i]=bins-1
    else :
        Gamma[i]=K
for i in  range (rows_num):
    for j in  range (clms_num):
        gray_im_С[i,j,:]= Gamma[gray_image[i,j,0]]*(gray_im[i,j,0]-L_low)
```

- ### **Повний приклад програм дивись** [Lab2.1](Lab_2_Example_1.ipynb)
