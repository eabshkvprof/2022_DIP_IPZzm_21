## **Лабораторна робота № 6**
# **Просторова фільтрація зображень. Нелінійна фільтрація. Медіанний фільтр.**
- - -
## **Мета роботи:**
Ознайомитись базовими алгоритмами просторової обробки зображень. Усунення шуму "сіль та перець" за допомогою медіанного фільтру.

## **Засоби виконання роботи:**
Для виконання роботи можливо використовувати довільний iнтерпретатор мови [PYTHON](https://www.python.org/downloads/), також [IDE Anaconda](https://anaconda.org/) (Jupyter Lab / Jupyter Notebook, Spyder) або [Microsoft Visual Studio](https://visualstudio.microsoft.com).

## **Теоретичні відомості**
Основні теоретичні відомості викладено в лекції.
При виконання лабораторної роботи використовуємо наступні вікна  
**Вікно типу "хрест" 3 х 3 має вигляд**  

| |0|1|2|
|:-|:-|:-|:-
|**0**| | W|
|**1**|W|W|W
|**2**| |W|

**Вікно типу "квадрат" 3 х 3 має вигляд**  

| |0|1|2|
|:-|:-|:-|:-
|**0**|W| W|W
|**1**|W|W|W
|**2**|W|W|W


## **Завдання до виконання. Частина 1**
1. Зчитати оригінальне зображення у відповідності за варіантом завдання лабораторної роботи №1.
1. Вивести структуру та розмір оригінального зображення.
1. Сформувати  зображення з шумом типу однополярні імпульси **"сіль та перець"** - 1024 випадкових "білих" та "чорних" пікселей  .
1. Сформувати  отфільтроване зображення за допомогою медіанного фільтру з маскою "хрест". Порівняти оригінальне зображення, зображення з шумом  та отфільтроване зображення.
1. Порівняти гістограми зображення з шумом та фільтрованого.
1. Сформувати  отфільтроване зображення за допомогою медіанного фільтру з маскою "квадрат". Порівняти оригінальне зображення, зображення з шумом  та отфільтроване зображення.
1. Порівняти гістограми зображення з шумом та фільтрованого.
1. Зробити висновок

## **Завдання до виконання. Частина 2**
1. Зчитати оригінальне зображення у відповідності за варіантом завдання лабораторної роботи №1.
1. Вивести структуру та розмір оригінального зображення.
1. Сформувати  зображення з шумом типу біполярні імпульси **"сіль та перець"** - 1024 тррійки випадкових "білих та чорних" пікселей.
1. Сформувати  отфільтроване зображення за допомогою **адаптованого** медіанного фільтру з маскою "хрест". Порівняти оригінальне зображення, зображення з шумом  та отфільтроване зображення.
1. Порівняти гістограми зображення з шумом та фільтрованого.
1. Сформувати  отфільтроване зображення за допомогою **адаптованого** медіанного фільтру з маскою "квадрат". Порівняти оригінальне зображення, зображення з шумом  та отфільтроване зображення.
1. Порівняти гістограми зображення з шумом та фільтрованого.
1. Зробити висновок

## **Приклади**
- ### **Використання медіанного фільтру типу квадрат**
Вважаємо, що оригінальне зображення завантажено до масиву ***test_image*** та визначені змінні ***rows_num*** , ***clms_num***  
 Формування однополярного шуму типу **сіль та перець**

```
from numpy.random import Generator, MT19937
rg = Generator(MT19937(12345))
impuls_num = 512  # КОЛИЧЕСТВО ЗАШУМЛЕННЫХ ПИКСЕЛЕЙ
test_im_noise = test_im.copy()
for i in range(1,impuls_num):
    test_im_noise[np.int32(rg.random()*rows_num),np.int32(rg.random()*clms_num),:] = 0   
    test_im_noise[np.int32(rg.random()*rows_num),np.int32(rg.random()*clms_num),:] = 255
```  
Фільтрація (квадрат 3 Х 3)
```
mask_row = 3
mask_clm = 3

## Визначення файлу перетворенного зображення
filtr_im_noise = np.zeros ( (rows_num, clms_num, 3), dtype = np.uint8)

pixels = np.zeros((mask_row, mask_clm, 3), dtype=np.uint8) # МАССИВ ПИКСЕЛЕЙ ДЛЯ СОРТИРОВКИ И ВЫБРА МЕДИАНЫ
pix    = np.zeros(3, dtype=np.uint8) # ПИКСЕЛЕЙ С ЗНАЧЕНИЕМ МЕДИАНЫ

for i in  range (1, (rows_num -1), 1):
    for j in  range (1, (clms_num-1), 1):
        for l in range (mask_row):
            for k in range (mask_clm):
                pixels[l,k, :] = test_im_noise [i-(2-k), j-(2-l), :]
        pix[0] = np.median(pixels[:,:,0])
        pix[1] = np.median(pixels[:,:,1])
        pix[2] = np.median(pixels[:,:,2])
        filtr_im_noise[i,j,:] = pix

# Відновлюємо крайні строки та ствпці зображення
for i in  (0,1,rows_num - 2 , rows_num -1):
    for j in  range (0, clms_num, 1):
        #filtr_im [i,j,:]=test_im[i, j,:]
        filtr_im_noise [i,j,:]= test_im_noise[i,j,:]
for j in  (0,1,clms_num - 2 , clms_num -1):
    for i in  range (0, rows_num, 1):
        #filtr_im [i,j,:]=test_im[i, j,:]
        filtr_im_noise [i,j,:]= test_im_noise[i,j,:]
```

- ### **Повний приклад програм дивись**  
[Lab6.1](Lab_6_Example_1_.ipynb)  
[Lab6.2](Lab_6_Example_2_.ipynb)
